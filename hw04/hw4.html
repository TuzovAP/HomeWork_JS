<!DOCTYPE HTML>
<html>

<head>
    <meta charset='utf-8'>
</head>

<body>
    <script>
        // 4.1 Написать функцию, преобразующую число в объект. 
        // Передавая на вход число от 0 до 999, мы должны получить на выходе объект, 
        // в котором в соответствующих свойствах описаны единицы, десятки и сотни.
        function numToObj() {
            let inputNumber = parseInt(prompt('Введите число от 0 до 999'));
            if (inputNumber > 0 && inputNumber <= 999) {
                const ones = inputNumber % 10;
                const ten = inputNumber % 100 - ones;
                const hundreds = inputNumber - ones - ten;
                const objNumber = {
                    ones,
                    ten: ten / 10,
                    hundreds: hundreds / 100,
                };
                console.log('Единицы: ' + objNumber.ones + ', Десятки: ' + objNumber.ten + ',  Сотни: ' + objNumber.hundreds);
            } else {
                console.log('Число должно быть от 0 до 999');
            }
        }

        // В прошлом домашнем задании вы реализовали корзину на базе массивов. Какими объектами можно заменить их элементы?
        // Реализуйте такие объекты, перенести функционал подсчета корзины на объектно-ориентированную базу.


        function Item(product, image, price, quantity, discount = 0) {
            this.product = product;
            this.image = `../img/${image}.png`;
            this.price = price;
            this.quantity = quantity;
            this.discount = discount;
            this.finalPrice = function () {
                if (this.discount != 0) {
                    return this.price - this.price * this.discount / 100;
                } else {
                    return this.price;
                }
            }
            this.showMyChart = function () {
                return `${this.product} (количество: ${this.quantity})`;
            }
        }

        let shoppingCart = []

        shoppingCart.push(
            new Item('Пылесос', 'product_imge_1', 15, 2)
        );
        shoppingCart.push(
            new Item('Телевизор', 'product_imge_2', 80, 5, 10)
        );
        shoppingCart.push(
            new Item('Утюг', 'product_imge_3', 10, 6)
        );
        shoppingCart.push(
            new Item('Чайник', 'product_imge_4', 15, 1)
        );
        shoppingCart.push(
            new Item('Плита', 'product_imge_5', 30, 10, 15)
        );

        // console.log(shoppingCart)

        function finalChart(shoppingCart) {
            console.log('Ваш заказ: ')
            shoppingCart.forEach(val => {
                console.log(`${val.showMyChart()}.
            Цена с учетом скидки: ${val.finalPrice()}.
            Стоимость позиции: ${val.quantity * val.finalPrice()}`);
            });
        }
        finalChart(shoppingCart);


        function finalCost(shoppingCart) {
            return shoppingCart.reduce(function (acc, shoppingCart) {
                return acc + (shoppingCart.finalPrice() * shoppingCart.quantity)
            }, 0)
        };
        console.log(('Итоговая стоимость заказа: ' + finalCost(shoppingCart)).toUpperCase());
    </script>
</body>

</html>